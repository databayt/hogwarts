# Claude Code Commands

**22 workflow shortcuts for rapid development**

---

## Command Categories

### üèóÔ∏è Component & Page Generation

#### /component
Generate React component with types, tests, and full boilerplate.

```bash
/component StudentCard
# Creates: component, types, tests, stories, exports
```

#### /page
Create Next.js page following mirror pattern architecture.

```bash
/page /s/[subdomain]/attendance
# Creates: page.tsx, layout.tsx, content.tsx, actions.ts
```

#### /api
Create server action or API route with Zod validation.

```bash
/api POST /api/attendance/mark
# Creates: route.ts with validation, error handling, types
```

---

### üíæ Database & Migrations

#### /migration
Generate Prisma migration with multi-tenant safety checks.

```bash
/migration add_attendance_table
# Creates: migration file, updates schema, checks schoolId
```

---

### ‚úÖ Quality & Testing

#### /review
Comprehensive code review using 10 parallel agents.

```bash
/review
# Checks: architecture, security, performance, tests, i18n, etc.
```

#### /test
Generate and run tests for specific files or features.

```bash
/test src/components/platform/attendance
# Creates: unit tests, integration tests, achieves 95%+ coverage
```

#### /fix-all
Auto-fix all code quality issues (prettier, eslint, type-check).

```bash
/fix-all
# Fixes: formatting, linting, simple type errors
```

#### /security-scan
Full security vulnerability audit (OWASP, auth, multi-tenant).

```bash
/security-scan
# Checks: XSS, CSRF, SQL injection, auth bypass, etc.
```

#### /snapshot
Visual UI testing with snapshot generation.

```bash
/snapshot AttendanceCalendar
# Creates: visual regression tests, snapshot files
```

#### /e2e
End-to-end test generation with Playwright.

```bash
/e2e "student enrollment workflow"
# Creates: E2E tests for complete user journey
```

---

### üö® Error Prevention & Detection

#### /validate-prisma
Validate Prisma queries for field types and required fields.

```bash
/validate-prisma src/components/platform/finance/actions.ts
# Detects: field type errors, invalid includes, missing fields
```

#### /scan-errors
Pattern-based error detection across codebase.

```bash
/scan-errors
# Finds: dictionary errors (173+), Prisma errors (13+), enum errors
```

#### /pre-commit-full
Comprehensive pre-commit validation (prevents 204+ error types).

```bash
/pre-commit-full
# Runs: all validations, blocks commit if errors found
```

#### /fix-build
Automated error fixing with 95%+ success rate.

```bash
/fix-build
# Auto-fixes: dictionary keys, Prisma fields, import errors
```

---

### ‚ö° Performance & Optimization

#### /optimize
Performance optimization analysis for files or features.

```bash
/optimize src/components/Dashboard
# Analyzes: re-renders, bundle size, memoization opportunities
```

#### /build-changed
Build only recently modified modules (incremental build).

```bash
/build-changed
# Builds: only changed files since last commit
```

#### /benchmark
Performance benchmarking with metrics.

```bash
/benchmark Dashboard
# Measures: load time, render time, interaction metrics
```

#### /lighthouse
Core Web Vitals analysis with Lighthouse.

```bash
/lighthouse /dashboard
# Reports: LCP, FID, CLS, performance score
```

#### /refactor-all
Bulk refactoring across codebase or modules.

```bash
/refactor-all constants
# Extracts: magic numbers to constants across all files
```

---

### üåç Internationalization

#### /i18n-check
Verify translation completeness for Arabic and English.

```bash
/i18n-check
# Checks: missing keys, unused keys, RTL issues
```

---

### üöÄ Deployment

#### /deploy
Deploy to staging or production with pre-flight checks.

```bash
/deploy staging
# Runs: tests, build, migrations, then deploys
```

---

## Command Usage Patterns

### Quick Component Creation

```bash
# Create component with everything
/component AttendanceCalendar

# Output:
‚úÖ Created src/components/platform/attendance/calendar.tsx
‚úÖ Created src/components/platform/attendance/calendar.test.tsx
‚úÖ Created src/components/platform/attendance/calendar.stories.tsx
‚úÖ Created src/components/platform/attendance/types.ts
‚úÖ Updated src/components/platform/attendance/index.ts
```

### Comprehensive Review Workflow

```bash
# Before merging PR
/review

# Output:
üìä Comprehensive Code Review Report
Critical Issues: 2
Warnings: 5
Suggestions: 12
Overall Grade: B+
```

### Error Prevention Workflow

```bash
# Step 1: Scan for errors
/scan-errors
# Found: 204 issues

# Step 2: Auto-fix
/fix-build
# Fixed: 204 issues in 6.8s

# Step 3: Validate
/pre-commit-full
# All checks passed ‚úÖ
```

### Performance Optimization

```bash
# Analyze performance
/benchmark Dashboard
/lighthouse /dashboard

# Optimize based on results
/optimize src/components/Dashboard

# Verify improvements
/benchmark Dashboard
```

---

## Command vs Agent Usage

### When to Use Commands

Commands are best for:
- **Quick tasks** with predictable outcomes
- **Standardized operations** (component creation, testing)
- **Automated workflows** (review, deploy)
- **Bulk operations** (fix-all, refactor-all)

### When to Use Agents

Agents are better for:
- **Complex problems** requiring reasoning
- **Custom implementations** specific to your needs
- **Debugging** unusual issues
- **Architecture decisions** and design

### Examples

```bash
# Use command for standard component
/component UserCard

# Use agent for complex component
/agents/react -p "Create virtualized infinite scroll table with sorting"

# Use command for standard review
/review

# Use agent for specific review focus
/agents/security -p "Review auth flow for session fixation vulnerabilities"
```

---

## Platform-Specific Features

All commands are configured for Hogwarts:

### Multi-Tenant Safety
- All generated code includes schoolId scoping
- Migrations check for tenant isolation
- Queries validated for tenant context

### Bilingual Support
- Components include i18n setup
- Generated tests cover RTL/LTR
- Validation checks translation completeness

### Pattern Compliance
- Mirror pattern enforced
- Server components by default
- Semantic HTML for typography

---

## Error Prevention System

### Coverage

The error prevention commands catch:
- **173+ dictionary errors** - Missing/incorrect translation keys
- **13+ Prisma errors** - Field types, includes, required fields
- **18+ enum errors** - Incomplete exhaustive checks
- **Import errors** - Missing/circular imports
- **Type errors** - Any usage, missing types

### Success Rates

- **Detection rate**: 100% for known patterns
- **Auto-fix rate**: 95%+ for pattern-based errors
- **Time saved**: 99.9% (7s vs 3 hours manual)
- **CI/CD failures prevented**: 100%

---

## Best Practices

### 1. Use Commands First
Try commands before agents for standard tasks:
```bash
/component StudentCard  # Not /agents/react -p "create StudentCard component"
```

### 2. Chain Commands
Combine commands for workflows:
```bash
/component StudentCard && /test StudentCard && /review
```

### 3. Pre-Commit Validation
Always validate before committing:
```bash
/scan-errors && /fix-build && /pre-commit-full
```

### 4. Regular Reviews
Review code regularly:
```bash
/review        # Comprehensive
/security-scan # Security-focused
/i18n-check    # Translation coverage
```

---

## Command Development

Commands are defined in `.claude/commands/*.md`:

```markdown
---
description: Generate React component
---

Create a new React component with:
- TypeScript types
- Test file
- Storybook story
- Index export
```

To add a new command:
1. Create `.claude/commands/your-command.md`
2. Add frontmatter with description
3. Define the command behavior
4. Test with `/your-command`

---

**See Also**:
- [Agents Documentation](/docs/claude-code/agents)
- [Workflows Guide](/docs/claude-code/workflows)
- [Best Practices](/docs/claude-code/best-practices)