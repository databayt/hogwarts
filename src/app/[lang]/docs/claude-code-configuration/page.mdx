# Claude Code Configuration

Master Claude Code's configuration system to optimize your development workflow and customize its behavior for your projects and teams.

## Configuration File Locations

Claude Code uses a hierarchical configuration system with three scope levels:

### User-Level Configuration
**Location**: `~/.claude/settings.json`

Global settings that apply to all Claude Code sessions across all projects.

```json
{
  "allowedTools": ["Read", "Glob", "Grep", "Bash(git status:*)"],
  "model": "claude-3-5-sonnet-20250514",
  "hooks": {},
  "mcp": {}
}
```

### Project-Level Configuration
**Location**: `.claude/settings.json` (in project root)

Project-specific settings shared with your team via git.

### Local Configuration
**Location**: `.claude/settings.local.json`

Personal project settings that override project config but aren't committed to git. Add to `.gitignore`.

### Precedence Hierarchy

```
Local (.claude/settings.local.json)
  ↓  overrides
Project (.claude/settings.json)
  ↓  overrides
User (~/.claude/settings.json)
```

## CLAUDE.md Files

Special documentation files that Claude automatically incorporates into every conversation.

### Purpose

CLAUDE.md serves as a living prompt that tells Claude:
- How your project works
- Coding standards and conventions
- Common commands and workflows
- Project-specific quirks and warnings
- Testing procedures

### File Locations

| Location | Scope | Use Case |
|----------|-------|----------|
| `CLAUDE.md` | Project root | Main project documentation |
| `~/.claude/CLAUDE.md` | User global | Personal preferences across all projects |
| Subdirectories | Specific modules | Module-specific context |

### Generate CLAUDE.md

```bash
claude /init
```

This creates a starter `CLAUDE.md` with common sections.

### Best Practices for CLAUDE.md

#### Keep It Concise
Focus on information Claude needs to be effective. Avoid verbose explanations.

❌ **Too Verbose**:
```markdown
Our project uses TypeScript which is a superset of JavaScript...
```

✅ **Concise**:
```markdown
- TypeScript strict mode enabled
- Use functional components with hooks
- ESLint + Prettier enforced in pre-commit
```

#### Document Commands

```markdown
## Common Commands

- `pnpm dev` - Start development server
- `pnpm test` - Run Vitest tests
- `pnpm build` - Build for production
- `pnpm lint` - Run ESLint and fix issues
```

#### Include Conventions

```markdown
## Code Style

- File names: kebab-case (e.g., `user-profile.tsx`)
- Components: PascalCase exports
- Hooks: prefix with `use` (e.g., `useAuth`)
- Server actions: suffix with `Action` (e.g., `loginAction`)
```

#### Warn About Gotchas

```markdown
## Important Notes

- NEVER edit `package-lock.json` directly
- Database migrations require `pnpm prisma migrate dev`
- `.env.local` required for local development
```

### Tuning CLAUDE.md

Treat CLAUDE.md as a prompt you're optimizing:

**Add Emphasis for Critical Items**:
```markdown
**IMPORTANT**: Always run tests before committing
**YOU MUST**: Include Jira ticket number in commit messages
```

**Use the `#` Key**:
Press `#` during Claude sessions to have Claude suggest additions to CLAUDE.md based on the current conversation.

**Version Control CLAUDE.md**:
Commit changes so your team benefits from improvements.

## Permission Management

Control which tools Claude can use to modify your system.

### View Current Permissions

```bash
claude /permissions
```

### Configure Permissions

#### Method 1: Interactive (Recommended)

During a session, when Claude requests permission:
- Select "Always allow" to add to allowlist
- Tool gets added to `settings.json`

#### Method 2: Command

```bash
claude /permissions
```

Choose to add or remove tools from the allowlist.

#### Method 3: Manual Edit

Edit `~/.claude/settings.json` or `.claude/settings.json`:

```json
{
  "allowedTools": [
    "Read",
    "Glob",
    "Grep",
    "Edit",
    "Write",
    "Bash(git:*)",
    "Bash(npm:*)",
    "Bash(pnpm:*)"
  ]
}
```

### Permission Patterns

Use wildcards for tool patterns:

```json
{
  "allowedTools": [
    "Bash(git add:*)",         // Allow all git add commands
    "Bash(git commit:*)",       // Allow all git commit commands
    "Bash(npm install:*)",      // Allow package installation
    "Bash(docker:*)",           // Allow all docker commands
    "mcp__*"                    // Allow all MCP tools
  ]
}
```

### Safe YOLO Mode

Skip permission prompts entirely (use with caution):

```bash
claude --dangerously-skip-permissions
```

**⚠️ Only use in**:
- Sandboxed containers
- Test environments without internet access
- CI/CD pipelines with limited scope

**Never use in**:
- Production code with sensitive data
- Environments with API keys or secrets
- Systems connected to the internet

## Model Configuration

### Available Models

| Model | Best For | Cost | Speed |
|-------|----------|------|-------|
| `claude-3-5-sonnet-20250514` | Balanced (default) | Medium | Fast |
| `claude-3-5-haiku-20241022` | Simple tasks | Low | Very Fast |
| `claude-opus-4-1-20250805` | Complex reasoning | High | Slower |

### Set Default Model

In `settings.json`:

```json
{
  "model": "claude-3-5-sonnet-20250514"
}
```

### Switch Models During Session

```bash
/model
```

Select from available models.

### Per-Command Model

```bash
claude -p "Simple task" --model claude-3-5-haiku-20241022
```

## Environment Variables

### Required

```bash
export ANTHROPIC_API_KEY=your-api-key-here
```

### Optional

```bash
# Custom config directory
export CLAUDE_CONFIG_DIR=~/my-custom-claude-config

# Max MCP output tokens
export MAX_MCP_OUTPUT_TOKENS=50000

# Enable debug mode
export CLAUDE_DEBUG=true
```

### Loading from .env

Claude Code automatically loads `.env` files in your project root.

## Advanced Configuration

### Output Limits

Control token limits for MCP tools:

```json
{
  "mcp": {
    "maxOutputTokens": 25000
  }
}
```

### Timeout Configuration

Set command timeouts (milliseconds):

```json
{
  "commandTimeout": 120000
}
```

### Custom Working Directory

```json
{
  "workingDirectory": "./src"
}
```

## Team Configuration Best Practices

### What to Commit

✅ Commit to version control:
- `.claude/settings.json`
- `CLAUDE.md`
- `.claude/commands/` (custom slash commands)
- `.claude/agents/` (subagents)
- `.mcp.json` (MCP server configs)

❌ Don't commit:
- `.claude/settings.local.json`
- API keys or secrets
- Personal preferences

### Onboarding New Developers

Create a setup guide in CLAUDE.md:

```markdown
## Setup for New Developers

1. Install Claude Code: `npm install -g claude-code`
2. Set ANTHROPIC_API_KEY in ~/.zshrc
3. Run `claude /init` in project root
4. Install project MCP servers: `claude /mcp install`
```

### Configuration Templates

Provide starter templates for common setups:

**Frontend Project**:
```json
{
  "allowedTools": [
    "Read", "Glob", "Grep", "Edit", "Write",
    "Bash(npm:*)",
    "Bash(git:*)",
    "Bash(pnpm:*)"
  ],
  "model": "claude-3-5-sonnet-20250514"
}
```

**Backend Project**:
```json
{
  "allowedTools": [
    "Read", "Glob", "Grep", "Edit", "Write",
    "Bash(npm:*)",
    "Bash(git:*)",
    "Bash(docker:*)",
    "Bash(curl:*)"
  ]
}
```

## Troubleshooting Configuration

### Config Not Loading

1. Verify file location: `~/.claude/settings.json`
2. Check JSON syntax: `cat ~/.claude/settings.json | jq`
3. Check file permissions: `ls -la ~/.claude/`

### Permissions Not Persisting

- Ensure you're editing the correct scope
- Check for typos in tool names
- Verify JSON syntax is valid

### CLAUDE.md Not Being Read

- File must be named exactly `CLAUDE.md` (case-sensitive)
- Must be in project root or subdirectory
- Check file encoding (should be UTF-8)

## Next Steps

- [Best Practices](/docs/claude-code-best-practices) - Optimize your workflow
- [Hooks](/docs/claude-code-hooks) - Automate actions at key points
- [MCP](/docs/claude-code-mcp) - Connect external tools
- [Slash Commands](/docs/claude-code-slash-commands) - Create custom shortcuts
