---
title: Database Seeds
description: Full K-12 school simulation with bilingual support (AR/EN) for Hogwarts Academy
---

# Database Seeds

The seed system creates a **realistic K-12 school simulation** for **demo.databayt.org** with full **bilingual support (Arabic/English)**.

## Quick Start

```bash
# Seed everything (additive - safe to run multiple times)
pnpm db:seed
```

**Total seed time:** ~26 minutes (first run), ~5 minutes (subsequent runs)

---

## Data Summary

| Entity              | Count  | Notes                               |
| ------------------- | ------ | ----------------------------------- |
| Users               | 3,104  | All roles with @databayt.org emails |
| Teachers            | 100    | Arabic names, department assigned   |
| Students            | 970    | K-12 distribution                   |
| Guardians           | ~1,940 | 2 per student (father + mother)     |
| Departments         | 6      | Bilingual AR+EN                     |
| Subjects            | 19     | Bilingual AR+EN                     |
| Year Levels         | 14     | KG1-12, Bilingual AR+EN             |
| Classrooms          | 28     | Labs, rooms, special facilities     |
| Classes             | 187    | Subject-level combinations          |
| Student Enrollments | 12,950 | Across all classes                  |
| Stream Categories   | 12     | EN + AR versions                    |
| Stream Courses      | 38     | EN + AR with chapters               |
| Exams               | 100    | Midterm + Final per class           |
| Exam Results        | 1,000  | With grade distribution             |
| Score Ranges        | 9      | A+ to F (Sudanese grading)          |
| Bank Accounts       | 3      | Operating, Savings, Petty Cash      |
| Books               | 480    | Multiple copies each                |

---

## User Accounts

All accounts use password: **1234**

### Admin Users

| Role       | Email                   | English           | Arabic        |
| ---------- | ----------------------- | ----------------- | ------------- |
| DEVELOPER  | dev@databayt.org        | System Developer  | مطور النظام   |
| ADMIN      | admin@databayt.org      | School Admin      | مدير المدرسة  |
| ACCOUNTANT | accountant@databayt.org | School Accountant | محاسب المدرسة |
| STAFF      | staff@databayt.org      | School Staff      | موظف المدرسة  |

### Batch Users

| Role     | Email Pattern                       | Count |
| -------- | ----------------------------------- | ----- |
| TEACHER  | teacher@, teacher1-99@databayt.org  | 100   |
| STUDENT  | student@, student1-999@databayt.org | 1,000 |
| GUARDIAN | parent@, parent1-1999@databayt.org  | 2,000 |

---

## Execution Phases (12 Total)

The seed runs in dependency order:

```
PHASE 1: CORE FOUNDATION
├── School (demo.databayt.org)
├── School Branding
└── User Accounts (3,104 users)

PHASE 2: ACADEMIC STRUCTURE
├── School Year (2025-2026)
├── Terms (Term 1, Term 2)
├── Periods (8 teaching + 2 breaks)
├── Departments (6)
└── Year Levels (14: KG1-12)

PHASE 3: PEOPLE
├── Teachers (100)
├── Students (970)
├── Guardian Types (5)
└── Guardians (~1,940)

PHASE 4: SUBJECTS & CLASSROOMS
├── Subjects (19 bilingual)
├── Classroom Types (8)
└── Classrooms (28)

PHASE 5: CLASSES & ENROLLMENTS
├── Classes (187)
├── Student Enrollments (12,950)
└── Teacher Assignments (187)

PHASE 6: LIBRARY
└── Books (480)

PHASE 7: LMS / STREAM
├── Stream Categories (12)
├── Stream Courses (38)
└── Course Chapters (10 per course)

PHASE 8: EXAMS & GRADES
├── Exams (100)
├── Exam Results (1,000)
├── Score Ranges (9)
└── Report Cards

PHASE 9: FINANCE
└── Chart of Accounts

PHASE 10: FEES & INVOICES
├── Fee Structures
├── Fee Records
└── Sample Invoices

PHASE 11: BANKING
└── Bank Accounts (3)

PHASE 12: OPERATIONS
├── Attendance Records
└── Timetable Entries
```

---

## File Structure

```
prisma/seeds/
├── index.ts              # Main orchestrator
├── types.ts              # TypeScript interfaces
├── constants.ts          # All data constants (bilingual)
├── utils.ts              # Helpers (upsert, batch, logging)
│
├── school.ts             # School + Branding
├── auth.ts               # User accounts (all roles)
├── academic.ts           # Years, Terms, Periods, Departments
├── subjects.ts           # Subjects (bilingual)
├── classrooms.ts         # Classrooms + Types
├── people.ts             # Teachers, Students, Guardians
├── classes.ts            # Classes, Enrollments
│
├── lessons.ts            # Lessons
├── stream.ts             # LMS: Courses, Chapters
├── library.ts            # Books
├── announcements.ts      # Announcements (bilingual)
├── events.ts             # School events
├── exams.ts              # Exams, Results
├── qbank.ts              # Question Bank
├── grades.ts             # Grades, Report Cards
│
├── finance.ts            # Chart of Accounts
├── fees.ts               # Fee Structures
├── invoices.ts           # Invoices
├── banking.ts            # Bank Accounts
│
├── attendance.ts         # Attendance (10 days)
├── timetable.ts          # Timetables
│
└── ensure-demo.ts        # Vercel deployment safety
```

---

## Additive Behavior

The seed system uses **upsert patterns** - safe to run multiple times:

```typescript
// All seeds use upsert for idempotency
await prisma.subject.upsert({
  where: {
    schoolId_departmentId_subjectName: {
      schoolId,
      departmentId,
      subjectName: "Mathematics",
    },
  },
  update: {
    subjectNameAr: "الرياضيات",
  },
  create: {
    schoolId,
    departmentId,
    subjectName: "Mathematics",
    subjectNameAr: "الرياضيات",
  },
})
```

**Benefits:**

- Run seeds as many times as needed
- Never duplicates data
- Updates existing records
- Safe for CI/CD pipelines

---

## Bilingual Strategy

All data supports Arabic (RTL) and English (LTR):

| Language         | Usage                               | Priority |
| ---------------- | ----------------------------------- | -------- |
| **Arabic (AR)**  | Primary display language, RTL       | Default  |
| **English (EN)** | Database storage, API compatibility | Fallback |

### Schema Pattern

```prisma
model Subject {
  subjectName   String   // English (e.g., "Mathematics")
  subjectNameAr String?  // Arabic (e.g., "الرياضيات")
}

model YearLevel {
  levelName   String   // English (e.g., "Grade 1")
  levelNameAr String?  // Arabic (e.g., "الصف الأول")
}

model Department {
  departmentName   String   // English
  departmentNameAr String?  // Arabic
}
```

### Display Logic

```typescript
const displayName =
  lang === "ar"
    ? item.nameAr || item.name // Arabic with English fallback
    : item.name // English
```

---

## Sudanese Configuration

### School Hours

- Start: 7:45 AM
- End: 3:20 PM (approx)
- Days: Sunday-Thursday (not Mon-Fri)
- Breaks: 9:20-9:40 AM, 12:05-12:45 PM

### Periods

| #   | English  | Arabic        | Time          |
| --- | -------- | ------------- | ------------- |
| 1   | Period 1 | الحصة الأولى  | 7:45 - 8:30   |
| 2   | Period 2 | الحصة الثانية | 8:35 - 9:20   |
| -   | Break    | الاستراحة     | 9:20 - 9:40   |
| 3   | Period 3 | الحصة الثالثة | 9:40 - 10:25  |
| 4   | Period 4 | الحصة الرابعة | 10:30 - 11:15 |
| 5   | Period 5 | الحصة الخامسة | 11:20 - 12:05 |
| -   | Lunch    | الغداء        | 12:05 - 12:45 |
| 6   | Period 6 | الحصة السادسة | 12:45 - 13:30 |
| 7   | Period 7 | الحصة السابعة | 13:35 - 14:20 |

### Year Levels

| Section      | Levels (EN) | Levels (AR)              | Students |
| ------------ | ----------- | ------------------------ | -------- |
| Kindergarten | KG 1, KG 2  | روضة أولى، روضة ثانية    | ~70 each |
| Primary      | Grade 1-6   | الصف الأول - السادس      | ~70 each |
| Intermediate | Grade 7-9   | الصف السابع - التاسع     | ~70 each |
| Secondary    | Grade 10-12 | الصف العاشر - الثاني عشر | ~70 each |

### Grading Scale

| Grade | Min | Max | GPA |
| ----- | --- | --- | --- |
| A+    | 95  | 100 | 4.0 |
| A     | 90  | 94  | 3.7 |
| B+    | 85  | 89  | 3.3 |
| B     | 80  | 84  | 3.0 |
| C+    | 75  | 79  | 2.7 |
| C     | 70  | 74  | 2.3 |
| D+    | 65  | 69  | 2.0 |
| D     | 60  | 64  | 1.7 |
| F     | 0   | 59  | 0.0 |

---

## Departments & Subjects

### Departments (6)

| English    | Arabic           |
| ---------- | ---------------- |
| Languages  | اللغات           |
| Sciences   | العلوم           |
| Humanities | العلوم الإنسانية |
| Religion   | الدين            |
| ICT        | تقنية المعلومات  |
| Arts & PE  | الفنون والرياضة  |

### Subjects (19)

| Department | Subjects                                          |
| ---------- | ------------------------------------------------- |
| Languages  | Arabic, English, French, Reading, Writing         |
| Sciences   | Mathematics, Science, Physics, Chemistry, Biology |
| Humanities | Social Studies, Geography, History, Civics        |
| Religion   | Islamic Studies, Quran                            |
| ICT        | Computer Science                                  |
| Arts & PE  | Art, Physical Education, Music                    |

---

## Classrooms (28)

| Type      | Count | Examples                            |
| --------- | ----- | ----------------------------------- |
| Classroom | 12    | Rooms 101-112                       |
| Lab       | 6     | Science Lab, Computer Lab, etc.     |
| Library   | 1     | Main Library                        |
| Art       | 1     | Art Studio                          |
| Music     | 1     | Music Room                          |
| Hall      | 1     | Assembly Hall                       |
| Sports    | 3     | Gymnasium, Football Field, Swimming |
| Admin     | 3     | Principal Office, Staff Room, etc.  |

---

## Troubleshooting

### Reset and Reseed

```bash
# Reset Prisma (clears all data)
pnpm prisma migrate reset

# Or just reseed (additive)
pnpm db:seed
```

### Common Issues

| Issue                     | Solution                          |
| ------------------------- | --------------------------------- |
| "Deadlock detected"       | Reduce batch size in people.ts    |
| "Table does not exist"    | Run `pnpm prisma db push`         |
| "Unknown field"           | Check Prisma schema, run generate |
| "Foreign key constraint"  | Seeds run in dependency order     |
| "Prisma client not found" | Run `pnpm prisma generate`        |

### Verify Data

```bash
# Open Prisma Studio
npx prisma studio

# Check counts
pnpm db:seed  # Shows summary at end
```

---

## Production Considerations

The seed system is designed for **development and demo environments**.

For production:

- Never run seeds on production database without review
- Use migrations for schema changes
- Seed data should be environment-specific
- The `ensure-demo.ts` file provides Vercel safety checks
