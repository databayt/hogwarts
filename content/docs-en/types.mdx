---
title: "Types"
description: "Canonical patterns for writing types.ts in feature directories"
---

## Current Progress (Audit)

118 types.ts files audited across the codebase (15,929 total lines):

| Area                                          | Status | Detail                                                                                                          |
| --------------------------------------------- | ------ | --------------------------------------------------------------------------------------------------------------- |
| Co-located with feature directories           | PASS   | 117/118 live in `src/components/`, 1 in `src/lib/`                                                              |
| File extension consistency                    | PASS   | All `.ts`, zero `.tsx` -- types are pure TypeScript                                                             |
| PascalCase naming convention                  | PASS   | Types, interfaces, enums all PascalCase consistently                                                            |
| Prisma type extensions                        | PASS   | 37 files properly import and extend `@prisma/client` types                                                      |
| Zod schema derivation                         | PASS   | Listing types correctly use `z.infer<typeof schema>` from validation.ts                                         |
| Prisma layer isolation                        | PASS   | `Prisma.XxxWhereInput` used only in queries.ts/actions.ts, never in components                                  |
| Exact duplicate files                         | FAIL   | 3 files (exams/qbank, exams/generate, grades/generate) are byte-for-byte identical at 346 lines each            |
| `ActionResponse<T>` duplication               | FAIL   | Defined 38+ times across codebase; canonical version exists at `src/lib/action-response.ts`                     |
| Row type divergence (types.ts vs columns.tsx) | FAIL   | TeacherRow has 6 fields in types.ts vs 18 in columns.tsx; ClassRow nullability mismatch                         |
| Hand-written Prisma models                    | FAIL   | registration/types.ts (486 lines) manually redefines Student with 90+ fields instead of using Prisma            |
| `any` usage                                   | FAIL   | 26 occurrences in types.ts files; 265 total `: any` / `as any` across school-dashboard                          |
| Inline types in content.tsx                   | FAIL   | 268 type definitions scattered across 192 content.tsx files instead of types.ts                                 |
| Inline types in columns.tsx                   | FAIL   | ~80 type definitions in ~40 columns.tsx files, often diverging from types.ts                                    |
| Inline types in actions.ts                    | FAIL   | ~110 type definitions in ~60 actions.ts files, especially ActionResponse                                        |
| Duplicate type names across files             | FAIL   | `LocationData` (4 files), `FormStep` (3 files), `ValidationResult` (7 files), `Conflict` (3 files in timetable) |
| `ExtendedUser` duplication                    | FAIL   | Defined in 5 files instead of importing from `src/components/auth/user.ts`                                      |
| `PaginationParams` duplication                | FAIL   | Independently defined in 10+ queries.ts files                                                                   |
| Bloated files (>300 lines)                    | FAIL   | 20 files over 300 lines; worst: profile/types.ts (737), file/types.ts (566), registration/types.ts (486)        |
| Inconsistent `type` vs `interface`            | INFO   | Some files use `type` for object shapes, others use `interface` -- both valid but inconsistent                  |
| Banking module naming                         | INFO   | Uses `*.types.ts` pattern (bank.types.ts, actions.types.ts) instead of single `types.ts`                        |

## Four Categories of types.ts

### Category A: DTO + Row + FormProps (~30 files)

Compact files for listing features. Contains database transfer objects, table row types, and form step props derived from Zod schemas. Typically 20-60 lines.

Reference: `listings/teachers/types.ts` (32 lines)

### Category B: Prisma Extension (~20 files)

Import Prisma models and extend with relations using `&`. Adds computed fields and nested relation shapes that Prisma's generated types don't include.

Reference: `finance/payroll/types.ts` (133 lines)

### Category C: Comprehensive Domain Types (~15 files)

Full domain coverage including data types, filters, sort options, component props, and API response shapes. Uses JSDoc for documentation.

Reference: `saas-dashboard/tenants/types.ts` (128 lines)

### Category D: Component Props (~10 files)

Pure component prop interfaces for reusable widgets. No database types, no Prisma imports -- just React component contracts.

## The 7 Rules

### 1. Single source of truth -- every type lives in exactly one place

Other files import from there. Never define the same type in types.ts AND columns.tsx AND actions.ts.

```typescript
// BAD: TeacherRow defined in BOTH types.ts and columns.tsx with different fields
// types.ts -- 6 fields
export type TeacherRow = {
  id: string
  userId: string | null
  name: string
  emailAddress: string
  status: string
  createdAt: string
}

// columns.tsx -- 18 fields (diverged!)
export type TeacherRow = {
  id: string
  name: string
  givenName: string
  surname: string
  emailAddress: string
  phone: string | null
  department: string | null
  departmentId: string | null
  subjectCount: number
  classCount: number
  employmentStatus: string
  employmentType: string
  hasAccount: boolean
  userId: string | null
  profilePhotoUrl: string | null
  joiningDate: string | null
  createdAt: string
}
```

```typescript
// columns.tsx
import type { TeacherRow } from "./types"

// GOOD: Define once in types.ts, import everywhere
// types.ts
export type TeacherRow = {
  id: string
  name: string
  givenName: string
  surname: string
  emailAddress: string
  phone: string | null
  department: string | null
  departmentId: string | null
  subjectCount: number
  classCount: number
  employmentStatus: string
  employmentType: string
  hasAccount: boolean
  userId: string | null
  profilePhotoUrl: string | null
  joiningDate: string | null
  createdAt: string
}
```

### 2. Always `export type` or `export interface` -- never define types inline

Types belong in types.ts, not scattered across content.tsx, columns.tsx, or actions.ts.

```typescript
// content.tsx
import type { ContentProps, DashboardItem } from "./types"

// BAD: Inline type in content.tsx (268 files do this)
export default async function Content({ dictionary }: { dictionary: any }) {
  const data: { id: string; name: string; count: number }[] = await getData()
  // ...
}

// GOOD: Extract to types.ts
// types.ts
export interface ContentProps {
  dictionary: Dictionary["school"]
}

export type DashboardItem = {
  id: string
  name: string
  count: number
}

export default async function Content({ dictionary }: ContentProps) {
  const data: DashboardItem[] = await getData()
  // ...
}
```

### 3. Derive from Prisma when possible

Import from `@prisma/client` and extend. Never hand-write 90+ field interfaces that mirror Prisma models.

```typescript
// GOOD: Import and extend (payroll/types.ts pattern)
import type { Student } from "@prisma/client"

// BAD: 486 lines manually redefining Student (registration/types.ts)
export interface Student {
  id: string
  schoolId: string
  grNumber?: string
  studentId?: string
  givenName: string
  middleName?: string
  surname: string
  dateOfBirth: Date
  gender: string
  bloodGroup?: string
  nationality?: string
  // ... 80+ more fields manually copied from Prisma
}

export type StudentWithRelations = Student & {
  guardian?: {
    id: string
    givenName: string
    surname: string
    phone: string | null
  }
  class?: {
    id: string
    name: string
  }
}
```

### 4. Derive from Zod when possible

Use `z.infer<typeof schema>` from validation.ts instead of duplicating field shapes.

```typescript
// GOOD: Derive from Zod schema (teachers/types.ts pattern)
import { z } from "zod"

import { teacherCreateSchema } from "./validation"

// BAD: Manually matching validation schema fields
export type TeacherFormData = {
  givenName: string
  surname: string
  emailAddress: string
  gender: string
  // ... duplicates validation.ts fields
}

export interface TeacherFormStepProps {
  form: UseFormReturn<z.infer<typeof teacherCreateSchema>>
  isView: boolean
}

export type StepFieldKeys = keyof z.infer<typeof teacherCreateSchema>
```

### 5. Import `ActionResponse` from `@/lib/action-response`

The canonical version lives at `src/lib/action-response.ts`. Never redefine it.

```typescript
// GOOD: Import from canonical location
import type { ActionResponse } from "@/lib/action-response"

// BAD: Redefined 38+ times across the codebase
export interface ActionResponse<T = any> {
  success: boolean
  data?: T
  error?: string
}

export async function createTeacher(
  data: FormData
): Promise<ActionResponse<{ id: string }>> {
  // ...
}
```

### 6. Max ~150 lines

Split into concerns (domain types, form types, filter types) if larger. Files over 300 lines indicate missing abstractions.

```typescript
// BAD: profile/types.ts (737 lines) -- everything in one file

// GOOD: Split by concern
// types.ts -- core domain types (~60 lines)
// form-types.ts -- form-specific props and step types (~40 lines)
// filter-types.ts -- filter, sort, pagination types (~30 lines)
```

### 7. No `any`

Use `unknown`, proper generics, or Prisma-derived types instead.

```typescript
// GOOD: Proper types
import type { User } from "@prisma/client"

// BAD: Type erasure (26 occurrences in types.ts files)
export interface RegistrationForm {
  user?: any
  formData?: any
}

export interface RegistrationForm {
  user?: Pick<User, "id" | "name" | "email">
  formData?: z.infer<typeof registrationSchema>
}
```

## 4 Canonical Templates

### Template A: Listing Feature Types (~30 files)

DTO + Row + FormStepProps + StepFieldKeys. Reference: `listings/teachers/types.ts` (32 lines).

```typescript
import { type UseFormReturn } from "react-hook-form"
import { z } from "zod"

import { teacherCreateSchema } from "./validation"

// Database transfer object (what queries return)
export type TeacherDTO = {
  id: string
  schoolId: string
  givenName: string
  surname: string
  gender: string | null
  emailAddress: string
  userId: string | null
  createdAt: Date
  updatedAt: Date
}

// Table row (what DataTable renders -- must match columns.tsx expectations)
export type TeacherRow = {
  id: string
  name: string
  givenName: string
  surname: string
  emailAddress: string
  phone: string | null
  department: string | null
  departmentId: string | null
  subjectCount: number
  classCount: number
  employmentStatus: string
  employmentType: string
  hasAccount: boolean
  userId: string | null
  profilePhotoUrl: string | null
  joiningDate: string | null
  createdAt: string
}

// Form step props (derived from Zod schema)
export interface TeacherFormStepProps {
  form: UseFormReturn<z.infer<typeof teacherCreateSchema>>
  isView: boolean
}

// Field keys for step validation
export type StepFieldKeys = keyof z.infer<typeof teacherCreateSchema>
```

Key points:

- Row type has ALL fields that columns.tsx needs (prevents divergence)
- DTO matches raw query output; Row matches table rendering needs
- Form types derive from Zod schema, not hand-written

### Template B: Prisma Extension Types (~20 files)

Import Prisma types, extend with relations. Reference: `finance/payroll/types.ts` (133 lines).

```typescript
import type { PayrollRun, SalarySlip } from "@prisma/client"

// Extended types with relations
export type PayrollRunWithRelations = PayrollRun & {
  slips?: SalarySlip[]
  _count?: {
    slips: number
  }
}

export type SalarySlipWithRelations = SalarySlip & {
  teacher: {
    id: string
    givenName: string
    surname: string
    employeeId: string | null
  }
  payrollRun: PayrollRun
}

// View models (what components render)
export type PayrollRunListItem = {
  id: string
  runNumber: string
  periodStart: Date
  periodEnd: Date
  paymentDate: Date
  status: string
  totalGross: number
  totalDeductions: number
  totalNet: number
  employeeCount: number
  processedAt: Date | null
  processedBy: string | null
}

// Domain-specific computed types
export type PayrollSummary = {
  totalRuns: number
  completedRuns: number
  pendingRuns: number
  totalEmployees: number
  monthlyPayroll: number
  yearToDatePayroll: number
  averageNetSalary: number
}
```

Key points:

- Prisma base types imported, not hand-written
- `WithRelations` suffix for types extending Prisma with `&`
- `ListItem` suffix for table/list view models
- `Summary` suffix for aggregated dashboard data

### Template C: Domain Types with JSDoc (~15 files)

Logical type hierarchy, filters, sort options. Reference: `saas-dashboard/tenants/types.ts` (128 lines).

```typescript
/**
 * Type definitions for Tenants (Schools) feature
 */

import type { School } from "@prisma/client"

/** Base tenant data from School model */
export type Tenant = School

/** Tenant with owner information for detail views */
export interface TenantWithOwners extends School {
  owners: Array<{
    id: string
    email: string
    name: string | null
  }>
}

/** Tenant usage metrics */
export interface TenantMetrics {
  students: number
  teachers: number
  classes: number
}

/** Tenant list item for data tables */
export interface TenantListItem {
  id: string
  name: string
  domain: string
  planType: string
  isActive: boolean
  createdAt: Date
  trialEndsAt: Date | null
  _count?: {
    users: number
  }
}

/** Plan types available for tenants */
export type PlanType = "basic" | "premium" | "enterprise"

/** Tenant status for filtering and display */
export type TenantStatus = "active" | "inactive" | "suspended" | "trial"

/** Tenant filter options for search and filtering */
export interface TenantFilters {
  search?: string
  planType?: PlanType | ""
  isActive?: boolean | ""
  status?: TenantStatus | ""
  createdAfter?: Date
  createdBefore?: Date
}

/** Tenant sort options */
export type TenantSortField = "name" | "domain" | "createdAt" | "planType"

export interface TenantSortOptions {
  field: TenantSortField
  direction: "asc" | "desc"
}
```

Key points:

- JSDoc on every exported type
- Logical grouping: base types, extended types, metrics, list items, filters, sort
- Union types for constrained values (`PlanType`, `TenantStatus`)
- Prisma `School` aliased as `Tenant` for domain clarity

### Template D: Shared Utility Types

Types that appear in 10+ files belong in `src/lib/`. Import, never redefine.

```typescript
// Usage in any actions.ts:
import type { ActionResponse } from "@/lib/action-response"

// src/lib/action-response.ts (CANONICAL -- import from here)
export interface ActionResponse<T = any> {
  success: boolean
  data?: T
  error?: string
  code?: string
  errors?: Record<string, string>
}

export async function createTeacher(
  data: FormData
): Promise<ActionResponse<{ id: string }>> {
  // ...
}
```

Other shared types that should follow this pattern:

- `ExtendedUser` -- canonical at `src/components/auth/user.ts`
- `PaginationParams` -- should be canonical at `src/lib/pagination.ts`

## Anti-Patterns

### 1. Three exact-duplicate 346-line files

`exams/qbank/types.ts`, `exams/generate/types.ts`, and `grades/generate/types.ts` are byte-for-byte identical. Shared exam types should live in one `exams/types.ts` and be imported.

### 2. ActionResponse defined 38+ times

The canonical version at `src/lib/action-response.ts` is ignored. Each actions.ts redefines its own `ActionResponse<T>` with subtle differences (some have `code`, some don't, some have `errors` record).

```typescript
// BAD: 38+ independent definitions
// onboarding/actions.ts
type ActionResponse<T> = { success: boolean; data?: T; error?: string }

// admission/actions.ts
interface ActionResponse<T> = { success: boolean; data?: T; message?: string }

// attendance/actions.ts
type ActionResponse = { success: boolean; error?: string }

// GOOD: One import
import type { ActionResponse } from "@/lib/action-response"
```

### 3. Row type divergence between types.ts and columns.tsx

TeacherRow in types.ts has 6 fields. TeacherRow in columns.tsx has 18 fields. The table renders from columns.tsx, so the types.ts definition is misleading and unused.

```typescript
// types.ts -- 6 fields (misleading, unused by table)
export type TeacherRow = {
  id: string
  userId: string | null
  name: string
  emailAddress: string
  status: string
  createdAt: string
}

// columns.tsx -- 18 fields (actual truth for table rendering)
export type TeacherRow = {
  id: string
  name: string
  givenName: string
  surname: string
  emailAddress: string
  phone: string | null
  department: string | null
  // ... 11 more fields
}
```

Fix: Define Row in types.ts with ALL fields columns.tsx needs. Remove the duplicate from columns.tsx.

### 4. 486-line hand-written Student interface

`registration/types.ts` manually defines 90+ fields that Prisma already generates. Every schema change requires updating two places.

```typescript
// GOOD: ~10 lines
import type { Student } from "@prisma/client"

// BAD: 486 lines manually mirroring Prisma
export interface Student {
  id: string
  schoolId: string
  grNumber?: string
  // ... 87 more fields
}

export type StudentWithRelations = Student & {
  guardian?: Pick<Guardian, "id" | "givenName" | "surname" | "phone">
  class?: Pick<Class, "id" | "name">
}
```

### 5. Inline types in component files

268 type definitions in content.tsx, 80 in columns.tsx, 110 in actions.ts. These should be in types.ts.

```typescript
// GOOD: Import from types.ts
import type { StudentRow } from "./types"

// BAD: Type defined inline in columns.tsx
export type StudentRow = {
  id: string
  name: string
  // ...
}

export function getColumns(): ColumnDef<StudentRow>[] {
  // ...
}

export function getColumns(): ColumnDef<StudentRow>[] {
  // ...
}
```

### 6. ExtendedUser defined in 5 files

Canonical version at `src/components/auth/user.ts` is ignored. Each file independently defines `ExtendedUser` with slightly different fields.

```typescript
// GOOD: Import from canonical location
import type { ExtendedUser } from "@/components/auth/user"

// BAD: 5 independent definitions
// auth/login/types.ts
type ExtendedUser = { id: string; name: string; email: string; role: string }

// onboarding/types.ts
type ExtendedUser = {
  id: string
  name?: string
  email?: string
  role?: string
  schoolId?: string
}
```

### 7. `any` type erasure

26 occurrences in types.ts files alone. 265 total across school-dashboard.

```typescript
// GOOD: Use proper types
import type { School, User } from "@prisma/client"
import type { UseFormReturn } from "react-hook-form"

// BAD: registration/types.ts
export interface RegistrationForm {
  user?: any
  school?: any
}

// BAD: exams/types.ts
export interface ExamFormProps {
  form: any
}

export interface RegistrationForm {
  user?: Pick<User, "id" | "name" | "email">
  school?: Pick<School, "id" | "name" | "subdomain">
}

export interface ExamFormProps {
  form: UseFormReturn<z.infer<typeof examSchema>>
}
```

## Quick Reference

### Type Suffix Conventions

| Suffix          | Purpose                                     | Example                   |
| --------------- | ------------------------------------------- | ------------------------- |
| `DTO`           | Database transfer object (raw query result) | `TeacherDTO`              |
| `Row`           | Table row (what DataTable renders)          | `TeacherRow`              |
| `Props`         | Component props                             | `TeacherFormStepProps`    |
| `WithRelations` | Prisma type extended with `&` relations     | `PayrollRunWithRelations` |
| `FormData`      | Form submission data (from Zod)             | `TeacherFormData`         |
| `Filters`       | Search/filter options                       | `TenantFilters`           |
| `Config`        | Configuration object                        | `ExamConfig`              |
| `Summary`       | Aggregated dashboard data                   | `PayrollSummary`          |
| `ListItem`      | List/table view model                       | `TenantListItem`          |

### Where Each Type Category Belongs

| Type                                   | Belongs in                                | Not in                   |
| -------------------------------------- | ----------------------------------------- | ------------------------ |
| Domain types (DTO, Row, WithRelations) | `types.ts`                                | content.tsx, columns.tsx |
| Form schemas                           | `validation.ts`                           | types.ts                 |
| Form data types (`z.infer<>`)          | `types.ts` (derived from validation.ts)   | actions.ts               |
| Column definitions                     | `columns.tsx` (imports Row from types.ts) | types.ts                 |
| Query params / filters                 | `types.ts` or `list-params.ts`            | queries.ts               |
| ActionResponse                         | `@/lib/action-response`                   | actions.ts               |
| ExtendedUser                           | `@/components/auth/user`                  | any feature types.ts     |
| PaginationParams                       | `@/lib/pagination` (canonical)            | queries.ts               |

### Import Hierarchy

```
@prisma/client          (generated Prisma types)
      |
  types.ts              (domain types, Row, DTO, WithRelations)
      |
  +---+---+---+---+
  |   |   |   |   |
content columns form table actions
 .tsx  .tsx  .tsx .tsx  .ts
```

Types flow DOWN from types.ts. Component files import from types.ts, never the reverse.

### Co-located File Structure

```
src/components/<feature>/
  types.ts          # All shared types for this feature
  validation.ts     # Zod schemas (types.ts derives from these)
  content.tsx       # Imports types from ./types
  columns.tsx       # Imports Row type from ./types
  table.tsx         # Imports Row type from ./types
  form.tsx          # Imports FormStepProps from ./types
  actions.ts        # Imports ActionResponse from @/lib/action-response
  queries.ts        # Imports filter/pagination types from ./types
```
