---
title: "Internationalization"
description: "Complete guide to internationalization with Arabic (RTL) and English (LTR) support"
---

## Overview

This application provides full internationalization support with Arabic (RTL) as the default language alongside English (LTR). The system handles both **static UI translations** and **bilingual user-generated content**.

### Supported Languages

| Locale | Name    | Direction | Flag | Currency | Default |
| ------ | ------- | --------- | ---- | -------- | ------- |
| `ar`   | Arabic  | RTL       | SA   | SAR      | Yes     |
| `en`   | English | LTR       | US   | USD      | No      |

### Key Features

- **URL-based routing**: `/[lang]/path` (e.g., `/ar/dashboard`, `/en/dashboard`)
- **Bilingual content**: Separate fields for Arabic/English user content
- **Logical CSS properties**: `ms-`, `me-`, `ps-`, `pe-` for auto-mirroring
- **Direction switching**: `dir` attribute on `<html>` element
- **Smart fallbacks**: Falls back to available language if preferred is empty

---

## Quick Start

### Server Components

```tsx
import type { Locale } from "@/components/internationalization/config"
import { getDictionary } from "@/components/internationalization/dictionaries"

export default async function Page({ params }: { params: { lang: string } }) {
  const { lang } = await params
  const dictionary = await getDictionary(lang as Locale)

  return (
    <div>
      <h1>{dictionary.common.home}</h1>
      <p>{dictionary.common.loading}</p>
    </div>
  )
}
```

### Client Components

```tsx
"use client"

import { useLocale } from "@/components/internationalization/use-locale"

export function LocaleIndicator() {
  const { locale, isRTL, localeConfig } = useLocale()

  return (
    <span className={isRTL ? "text-end" : "text-start"}>
      {localeConfig.flag} {localeConfig.nativeName}
    </span>
  )
}
```

---

## Bilingual User Content

For user-generated content (announcements, notifications, etc.), use separate fields for each language.

### Pattern 1: Dual Database Fields

**Prisma Schema:**

```prisma
model Announcement {
  id       String @id @default(cuid())
  schoolId String

  // Bilingual content fields
  titleEn  String?
  titleAr  String?
  bodyEn   String? @db.Text
  bodyAr   String? @db.Text

  // ... other fields
}
```

**Usage in Components:**

```tsx
import { getLocalizedText } from "@/lib/i18n-content"
import type { Locale } from "@/components/internationalization/config"

interface Props {
  announcement: {
    titleEn: string | null
    titleAr: string | null
    bodyEn: string | null
    bodyAr: string | null
  }
  lang: Locale
}

export function AnnouncementCard({ announcement, lang }: Props) {
  const title = getLocalizedText(
    lang,
    announcement.titleEn,
    announcement.titleAr
  )
  const body = getLocalizedText(lang, announcement.bodyEn, announcement.bodyAr)

  return (
    <article>
      <h2>{title}</h2>
      <p>{body}</p>
    </article>
  )
}
```

### Pattern 2: JSON Storage

**Prisma Schema:**

```prisma
model Notification {
  id      String @id @default(cuid())
  // Store as JSON: { "en": "...", "ar": "..." }
  title   Json
  message Json
}
```

**Usage:**

```tsx
import { getLocalizedFromJSON } from "@/lib/i18n-content"

const title = getLocalizedFromJSON(lang, notification.title)
```

### Bilingual Form Pattern

```tsx
"use client"

import { useForm } from "react-hook-form"

import { Tabs, TabsContent, TabsList, TabsTrigger } from "@/components/ui/tabs"

interface BilingualFormData {
  titleEn: string
  titleAr: string
  bodyEn: string
  bodyAr: string
}

export function BilingualContentForm() {
  const form = useForm<BilingualFormData>()

  return (
    <Tabs defaultValue="ar">
      <TabsList>
        <TabsTrigger value="ar">ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</TabsTrigger>
        <TabsTrigger value="en">English</TabsTrigger>
      </TabsList>

      <TabsContent value="ar" dir="rtl">
        <Input {...form.register("titleAr")} placeholder="ÿßŸÑÿπŸÜŸàÿßŸÜ" />
        <Textarea {...form.register("bodyAr")} placeholder="ÿßŸÑŸÖÿ≠ÿ™ŸàŸâ" />
      </TabsContent>

      <TabsContent value="en" dir="ltr">
        <Input {...form.register("titleEn")} placeholder="Title" />
        <Textarea {...form.register("bodyEn")} placeholder="Content" />
      </TabsContent>
    </Tabs>
  )
}
```

### i18n Content Utilities

Location: `src/lib/i18n-content.ts`

```ts
// Check completion status

// Convert legacy content during migration
import {
  convertToBilingual,
  detectLanguage,
  getBilingualStatus,
  getLocalizedFromJSON,
  getLocalizedFromObject,
  getLocalizedText,
} from "@/lib/i18n-content"

// From dual fields
const title = getLocalizedText(locale, item.titleEn, item.titleAr)

// From BilingualText object
const text = getLocalizedFromObject(locale, { en: "Hello", ar: "ŸÖÿ±ÿ≠ÿ®ÿß" })

// From JSON database field
const message = getLocalizedFromJSON(locale, dbField)

const { complete, missingEn, missingAr } = getBilingualStatus(item.title)

const bilingual = convertToBilingual("ŸÖÿ±ÿ≠ÿ®ÿß ÿ®ÿßŸÑÿπÿßŸÑŸÖ") // { en: "", ar: "ŸÖÿ±ÿ≠ÿ®ÿß ÿ®ÿßŸÑÿπÿßŸÑŸÖ" }
```

---

## Configuration

### Locale Config

Location: `src/components/internationalization/config.ts`

```ts
export const i18n = {
  defaultLocale: "ar",
  locales: ["en", "ar"],
} as const

export type Locale = (typeof i18n)["locales"][number]

export const localeConfig = {
  en: {
    name: "English",
    nativeName: "English",
    dir: "ltr",
    flag: "üá∫üá∏",
    dateFormat: "MM/dd/yyyy",
    currency: "USD",
  },
  ar: {
    name: "Arabic",
    nativeName: "ÿßŸÑÿπÿ±ÿ®Ÿäÿ©",
    dir: "rtl",
    flag: "üá∏üá¶",
    dateFormat: "dd/MM/yyyy",
    currency: "SAR",
  },
} as const

export function isRTL(locale: Locale): boolean {
  return localeConfig[locale]?.dir === "rtl"
}
```

---

## Dictionary System

### Loading Dictionaries

Location: `src/components/internationalization/dictionaries.ts`

The system uses **route-specific dictionary loaders** for optimized bundle sizes:

```ts
// Marketing pages - lightweight
// Platform core - general + school + operator

// Finance pages - includes finance module

// Full dictionary - all translations (use sparingly)
import {
  getDictionary,
  getFinanceDictionary,
  getMarketingDictionary,
  getPlatformCoreDictionary,
} from "@/components/internationalization/dictionaries"
```

### Translation Files Structure

```
src/components/internationalization/
‚îú‚îÄ‚îÄ config.ts              # Locale config, types
‚îú‚îÄ‚îÄ dictionaries.ts        # Dictionary loaders
‚îú‚îÄ‚îÄ use-locale.ts          # Client hooks
‚îú‚îÄ‚îÄ use-dictionary.ts      # Dictionary hook
‚îú‚îÄ‚îÄ language-switcher.tsx  # UI component
‚îú‚îÄ‚îÄ en.json                # General English
‚îú‚îÄ‚îÄ ar.json                # General Arabic
‚îú‚îÄ‚îÄ school-en.json         # School module (English)
‚îú‚îÄ‚îÄ school-ar.json         # School module (Arabic)
‚îú‚îÄ‚îÄ operator-en.json       # Operator module
‚îú‚îÄ‚îÄ operator-ar.json
‚îî‚îÄ‚îÄ dictionaries/
    ‚îú‚îÄ‚îÄ en/
    ‚îÇ   ‚îú‚îÄ‚îÄ finance.json
    ‚îÇ   ‚îú‚îÄ‚îÄ library.json
    ‚îÇ   ‚îî‚îÄ‚îÄ ...
    ‚îî‚îÄ‚îÄ ar/
        ‚îú‚îÄ‚îÄ finance.json
        ‚îú‚îÄ‚îÄ library.json
        ‚îî‚îÄ‚îÄ ...
```

### Type-Safe Usage

```tsx
import type { Dictionary } from "@/components/internationalization/dictionaries"

interface Props {
  dictionary: Dictionary["school"]
}

export function StudentList({ dictionary }: Props) {
  return <h1>{dictionary.students.title}</h1>
}
```

---

## RTL Support with Logical Properties

### CSS Logical Properties (Preferred)

Always use **logical CSS properties** instead of physical directions. These automatically adapt to RTL/LTR:

| Physical (Avoid) | Logical (Use) | Description          |
| ---------------- | ------------- | -------------------- |
| `ml-*`           | `ms-*`        | Margin inline-start  |
| `mr-*`           | `me-*`        | Margin inline-end    |
| `pl-*`           | `ps-*`        | Padding inline-start |
| `pr-*`           | `pe-*`        | Padding inline-end   |
| `left-*`         | `start-*`     | Position start       |
| `right-*`        | `end-*`       | Position end         |
| `text-left`      | `text-start`  | Text alignment start |
| `text-right`     | `text-end`    | Text alignment end   |
| `border-l-*`     | `border-s-*`  | Border start         |
| `border-r-*`     | `border-e-*`  | Border end           |
| `rounded-l-*`    | `rounded-s-*` | Border radius start  |
| `rounded-r-*`    | `rounded-e-*` | Border radius end    |

**Example:**

```tsx
// ‚ùå Wrong - physical properties don't adapt
<div className="ml-4 pr-2 text-left border-l-2">

// ‚úÖ Correct - logical properties adapt to RTL/LTR
<div className="ms-4 pe-2 text-start border-s-2">
```

### Layout Integration

The root layout sets direction based on locale:

```tsx
// src/app/[lang]/layout.tsx
import {
  localeConfig,
  type Locale,
} from "@/components/internationalization/config"

export default async function RootLayout({
  children,
  params,
}: {
  children: React.ReactNode
  params: { lang: string }
}) {
  const { lang } = (await params) as { lang: Locale }
  const config = localeConfig[lang]

  return (
    <html lang={lang} dir={config.dir}>
      <body>{children}</body>
    </html>
  )
}
```

### When to Use `rtl:` Variants

Only use `rtl:` variants for cases that **cannot** be solved with logical properties:

```tsx
// Flex direction reversal (no logical equivalent)
<div className="flex flex-row rtl:flex-row-reverse">

// Icon mirroring for directional icons
<ChevronRight className="rtl:scale-x-[-1]" />

// Space reversal in flex
<div className="flex space-x-2 rtl:space-x-reverse">
```

---

## Client-Side Hooks

### useLocale Hook

```tsx
"use client"

import { useLocale } from "@/components/internationalization/use-locale"

export function MyComponent() {
  const { locale, isRTL, localeConfig } = useLocale()

  return (
    <div dir={isRTL ? "rtl" : "ltr"}>
      <p>Current: {localeConfig.nativeName}</p>
      <p>Direction: {localeConfig.dir}</p>
    </div>
  )
}
```

### useDictionary Hook

```tsx
"use client"

import { useDictionary } from "@/components/internationalization/use-dictionary"

export function ClientComponent() {
  const { dictionary, isLoading } = useDictionary()

  if (isLoading) return <Spinner />

  return <h1>{dictionary?.common.welcome}</h1>
}
```

### useSwitchLocaleHref Hook

```tsx
"use client"

import Link from "next/link"

import { useSwitchLocaleHref } from "@/components/internationalization/use-locale"

export function LanguageSwitcher() {
  const switchLocaleHref = useSwitchLocaleHref()

  return (
    <nav className="flex gap-2">
      <Link href={switchLocaleHref("ar")}>ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</Link>
      <Link href={switchLocaleHref("en")}>English</Link>
    </nav>
  )
}
```

---

## Arabic Number & Date Formatting

### Number Formatting

```tsx
// Format with locale-aware separators
const formatter = new Intl.NumberFormat(locale, {
  style: "decimal",
  maximumFractionDigits: 2,
})
formatter.format(1234567) // ar: "Ÿ°Ÿ¨Ÿ¢Ÿ£Ÿ§Ÿ¨Ÿ•Ÿ¶Ÿß" | en: "1,234,567"

// Currency formatting
const currencyFormatter = new Intl.NumberFormat(locale, {
  style: "currency",
  currency: locale === "ar" ? "SAR" : "USD",
})
currencyFormatter.format(99.99) // ar: "Ÿ©Ÿ©Ÿ´Ÿ©Ÿ© ÿ±.ÿ≥" | en: "$99.99"
```

### Date Formatting

```tsx
const dateFormatter = new Intl.DateTimeFormat(locale, {
  year: "numeric",
  month: "long",
  day: "numeric",
})
dateFormatter.format(new Date()) // ar: "Ÿ° ÿØŸäÿ≥ŸÖÿ®ÿ± Ÿ¢Ÿ†Ÿ¢Ÿ•" | en: "December 1, 2025"

// Relative time
const relativeFormatter = new Intl.RelativeTimeFormat(locale, {
  numeric: "auto",
})
relativeFormatter.format(-2, "day") // ar: "ŸÖŸÜÿ∞ ŸäŸàŸÖŸäŸÜ" | en: "2 days ago"
```

### Arabic Pluralization

Arabic has three plural forms: singular (1), dual (2), and plural (3+).

```tsx
function arabicPlural(
  count: number,
  singular: string,
  dual: string,
  plural: string
): string {
  if (count === 1) return singular
  if (count === 2) return dual
  return plural
}

// Usage
arabicPlural(count, "ÿ∑ÿßŸÑÿ®", "ÿ∑ÿßŸÑÿ®ÿßŸÜ", "ÿ∑ŸÑÿßÿ®") // student/students
arabicPlural(count, "ŸäŸàŸÖ", "ŸäŸàŸÖÿßŸÜ", "ÿ£ŸäÿßŸÖ") // day/days
```

---

## Best Practices

### UI Guidelines

1. **Use logical properties** - `ms-`, `me-`, `ps-`, `pe-` instead of `ml-`, `mr-`, etc.
2. **Mirror directional icons** - Arrows and chevrons should flip in RTL
3. **Test both languages** - Always verify layouts in ar and en
4. **Numbers stay Western** - Unless explicitly localized for display

### Content Guidelines

1. **Avoid string concatenation** - Use full-sentence translations
2. **Provide both languages** - Mark incomplete translations clearly
3. **Use bilingual forms** - Tab-based input for ar/en content
4. **Validate completeness** - Show warnings for missing translations

### Typography

- **Arabic font**: Rubik (system default)
- **English font**: Inter
- **Line height**: 1.8 recommended for Arabic
- **No font-size hardcoding** - Use semantic HTML (h1-h6, p, small)

### Testing Checklist

- [ ] All flows tested in ar/en
- [ ] Logical properties used (no `ml-*`, `mr-*`, etc.)
- [ ] Icons mirror correctly
- [ ] Dates/numbers localized
- [ ] Screen readers handle language
- [ ] Keyboard navigation works
- [ ] No text overflow

---

## Migration Guide

### Converting Legacy Content

```ts
import { convertToBilingual, detectLanguage } from "@/lib/i18n-content"

// Migrate existing single-field content
async function migrateAnnouncements() {
  const announcements = await db.announcement.findMany()

  for (const ann of announcements) {
    const lang = detectLanguage(ann.title)
    const titleBilingual = convertToBilingual(ann.title, lang)
    const bodyBilingual = convertToBilingual(ann.body, lang)

    await db.announcement.update({
      where: { id: ann.id },
      data: {
        titleEn: titleBilingual.en,
        titleAr: titleBilingual.ar,
        bodyEn: bodyBilingual.en,
        bodyAr: bodyBilingual.ar,
      },
    })
  }
}
```

### Prisma Migration Example

```sql
-- Add bilingual fields
ALTER TABLE "announcements" ADD COLUMN "titleEn" TEXT;
ALTER TABLE "announcements" ADD COLUMN "titleAr" TEXT;
ALTER TABLE "announcements" ADD COLUMN "bodyEn" TEXT;
ALTER TABLE "announcements" ADD COLUMN "bodyAr" TEXT;

-- Copy existing data (detect language and assign)
UPDATE "announcements"
SET "titleAr" = "title", "bodyAr" = "body"
WHERE "title" ~ '[\u0600-\u06FF]';

UPDATE "announcements"
SET "titleEn" = "title", "bodyEn" = "body"
WHERE "title" !~ '[\u0600-\u06FF]';
```

---

## Folder Structure

```
src/
  components/internationalization/
    config.ts              # Locale config, types, isRTL helper
    dictionaries.ts        # Dictionary loaders (route-specific)
    use-locale.ts          # Client hooks: useLocale, useSwitchLocaleHref
    use-dictionary.ts      # useDictionary hook
    language-switcher.tsx  # Language switcher component
    en.json                # General English translations
    ar.json                # General Arabic translations
    school-*.json          # School module translations
    operator-*.json        # Operator module translations
    dictionaries/          # Feature-specific translations
      en/
      ar/
  lib/
    i18n-content.ts        # Bilingual content utilities
  styles/
    globals.css            # Base styles with logical properties
```

---

## References

### Internal

- `src/lib/i18n-content.ts` - Bilingual content utilities
- `src/components/internationalization/` - Full i18n implementation

### External

- [Next.js Internationalization](https://nextjs.org/docs/app/building-your-application/routing/internationalization)
- [Tailwind CSS Logical Properties](https://tailwindcss.com/docs/margin#using-logical-properties)
- [MDN CSS Logical Properties](https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_logical_properties_and_values)
- [W3C Authoring HTML & CSS for RTL](https://www.w3.org/International/techniques/authoring-html)
